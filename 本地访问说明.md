# FocusFlow 本地访问说明

## 如何预览生成结果

有两种方式可以预览你的应用：

### 方式一：开发预览（推荐，边改边看）

1. 先启动后端：在终端执行 `cd server` 然后 `npm run dev`（或直接双击 **start.bat**）。
2. 再启动前端：在项目根目录执行 `npm run dev`。
3. 在浏览器打开：**http://localhost:3000**。

修改代码后，页面会**自动刷新**，直接就能看到最新效果。

### 方式二：打包后预览（看最终上线效果）

1. 在项目根目录执行打包：
   ```bash
   npm run build
   ```
2. 打包完成后执行预览：
   ```bash
   npm run preview
   ```
3. 终端会显示预览地址（一般是 **http://localhost:4173**），在浏览器打开即可。

这种方式看到的是**打包后的生产版本**，和真正部署到服务器后的效果一致。  
（如需完整功能，后端仍需单独运行：`cd server` → `npm run dev`。）

---

## 访问地址

在浏览器地址栏输入以下任一地址即可打开应用：

| 地址 | 说明 |
|------|------|
| **http://localhost:3000** | 前端应用（主要访问这个） |
| http://127.0.0.1:3000 | 同上，用本机 IP 访问 |
| http://localhost:3001/api/health | 后端 API 健康检查 |

---

## 启动步骤（必须按顺序做）

### 第一步：打开终端

- **Windows**：在项目文件夹里按住 `Shift` 点右键，选「在此处打开 PowerShell 窗口」  
  或：按 `Win + R`，输入 `cmd` 回车，再输入 `cd` 后面加你的项目路径，例如：  
  `cd C:\Users\89580\Downloads\focusflow-dashboard`

### 第二步：安装依赖（必做，否则会报 vite 不是内部或外部命令）

在项目根目录执行：

```bash
npm install
```

然后进入 server 目录再安装后端依赖：

```bash
cd server
npm install
cd ..
```

**若出现「vite 不是内部或外部命令」**：说明根目录依赖没装好，在项目根目录重新执行一次 `npm install`，完成后再运行 `npm run dev`。

### 第三步：启动后端

开**第一个**终端窗口，在项目根目录执行：

```bash
cd server
npm run dev
```

看到类似 `服务器运行在 http://localhost:3001` 就表示后端已启动，**不要关闭这个窗口**。

### 第四步：启动前端

再开**第二个**终端窗口，在项目根目录执行：

```bash
npm run dev
```

看到类似 `Local: http://localhost:3000` 就表示前端已启动。

### 第五步：在浏览器打开

在浏览器地址栏输入：

```
http://localhost:3000
```

回车即可打开应用。

---

## 使用一键启动（Windows）

在项目根目录双击运行 **start.bat**，会自动打开两个窗口分别运行后端和前端。  
等待几秒后，在浏览器访问：**http://localhost:3000**。

---

## 常见问题

**Q: 输入 http://localhost:3000 打不开？**

1. 确认**两个**终端窗口都在运行（一个跑 `server` 的 `npm run dev`，一个跑根目录的 `npm run dev`）。
2. 确认浏览器地址写的是 `http://localhost:3000`（不要漏掉 `http://`）。
3. 换浏览器试试，或用 `http://127.0.0.1:3000`。

**Q: 页面打开了但报错、数据不显示？**

- 需要在 `server` 目录下创建 `.env` 文件，并填写 Supabase 的 URL 和 Anon Key。  
  详见 **SUPABASE_SETUP.md**。

**Q: 提示端口被占用？**

- 关闭其他可能占用 3000、3001 端口的程序，或修改 `vite.config.ts` 里的 `port` 和 `server/` 里配置的 `PORT`，再重新启动。

---

## 总结

- **本地访问应用的地址**：**http://localhost:3000**
- 先启动后端（`cd server` → `npm run dev`），再启动前端（`npm run dev`），然后浏览器打开上述地址即可。
